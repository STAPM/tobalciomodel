vectors_data = tobalciomodel::vectors_hhold
mapping = tobalciomodel::coicop_cpa_mapping
exp <- -1*(1 - saving_rate)*sum(expenditure)
# select the chosen reallocation vector
if (vector == "hhfce_all") {
v <- as.vector(as.matrix( vectors_data[,2] ))
} else if (vector == "hhfce_noalc") {
v <- as.vector(as.matrix( vectors_data[,3] ))
} else if (vector == "hhfce_notob") {
v <- as.vector(as.matrix( vectors_data[,4] ))
} else if (vector == "hhfce_noalctob") {
v <- as.vector(as.matrix( vectors_data[,5] ))
} else if (vector == "all_hotels") {
v <- as.vector(as.matrix( vectors_data[,6] ))
} else if (vector == "all_rec_durables") {
v <- as.vector(as.matrix( vectors_data[,7] ))
} else if (vector == "all_rec_services") {
v <- as.vector(as.matrix( vectors_data[,8] ))
}
# redistribute the expenditure along the vector
new_exp <- exp*v
new_exp <- cbind(vectors_data[,1],new_exp)
# map the new expenditure onto the CPA categories
merge <- merge.data.table(mapping,
new_exp,
by = "coicop")
merge[, mapped_exp := new_exp*mapping]
# sum up within CPA categories
merge[, total_exp := sum(mapped_exp), by = "CPA_code"]
# collapse
final <- unique(merge[,c("CPA_code","Product","total_exp")])
### Two discrepancies are caused by merged CPA categories in the
### HHFCE table:
#
# (1) H53 (postal and courier) and I55 (accommodation services)
# (2) C27 (electrical equipment) and C28 (machinery and equipment n.e.c)
#
#     Go to the final consumption expenditure by households column
#     in the IOT sheet in "ioat 2017" and construct ratios from the
#     figures given there to break up the categories. (Hard coded here)
x <- merge(final, tobalciomodel::CPA,
by = "CPA_code", sort = FALSE, all = TRUE)
H53_I55 <- as.numeric(x[CPA_code == "CPA_H53&I55","total_exp"])
x[CPA_code == "CPA_H53", total_exp := H53_I55*841/(841+4722)]
x[CPA_code == "CPA_I55", total_exp := H53_I55*4722/(841+4722)]
C27_C28 <- as.numeric(x[CPA_code == "CPA_C27 & C28","total_exp"])
x[CPA_code == "CPA_C27", total_exp := C27_C28*(1348)/(1348+753)]
x[CPA_code == "CPA_C28", total_exp := C27_C28*(753)/(1348+753)]
setkey(x, CPA_code)
x <- x[!"CPA_C27 & C28"]
x <- x[!"CPA_H53&I55"]
x <- x[,c("CPA_code","Product.y","total_exp")]
setnames(x,c("Product.y","total_exp"),c("Product","hhold_exp"))
View(x)
usethis::use_data(sic_cpa_fai_mapping,overwrite = TRUE)
roxygen2::roxygenise()
library(tobalciomodel)
expenditure = c(-20,10,30)
saving_rate = 0.1
vector = "hhfce_noalctob"
vectors_data = tobalciomodel::vectors_hhold
mapping = tobalciomodel::coicop_cpa_mapping
FAI = FALSE
# calculate the amount of expenditure that will be reallocated
exp <- -1*(1 - saving_rate)*sum(expenditure)
# select the chosen reallocation vector
if (vector == "hhfce_all") {
v <- as.vector(as.matrix( vectors_data[,2] ))
} else if (vector == "hhfce_noalc") {
v <- as.vector(as.matrix( vectors_data[,3] ))
} else if (vector == "hhfce_notob") {
v <- as.vector(as.matrix( vectors_data[,4] ))
} else if (vector == "hhfce_noalctob") {
v <- as.vector(as.matrix( vectors_data[,5] ))
} else if (vector == "all_hotels") {
v <- as.vector(as.matrix( vectors_data[,6] ))
} else if (vector == "all_rec_durables") {
v <- as.vector(as.matrix( vectors_data[,7] ))
} else if (vector == "all_rec_services") {
v <- as.vector(as.matrix( vectors_data[,8] ))
}
# redistribute the expenditure along the vector
new_exp <- exp*v
new_exp <- cbind(vectors_data[,1],new_exp)
# map the new expenditure onto the CPA categories
merge <- merge.data.table(mapping,
new_exp,
by = "coicop")
merge[, mapped_exp := new_exp*mapping]
# sum up within CPA categories
merge[, total_exp := sum(mapped_exp), by = "CPA_code"]
# collapse
final <- unique(merge[,c("CPA_code","Product","total_exp")])
### Two discrepancies are caused by merged CPA categories in the
### HHFCE table:
#
# (1) H53 (postal and courier) and I55 (accommodation services)
# (2) C27 (electrical equipment) and C28 (machinery and equipment n.e.c)
#
#     Go to the final consumption expenditure by households column
#     in the IOT sheet in "ioat 2017" and construct ratios from the
#     figures given there to break up the categories. (Hard coded here)
x <- merge(final, tobalciomodel::CPA,
by = "CPA_code", sort = FALSE, all = TRUE)
H53_I55 <- as.numeric(x[CPA_code == "CPA_H53&I55","total_exp"])
x[CPA_code == "CPA_H53", total_exp := H53_I55*841/(841+4722)]
x[CPA_code == "CPA_I55", total_exp := H53_I55*4722/(841+4722)]
C27_C28 <- as.numeric(x[CPA_code == "CPA_C27 & C28","total_exp"])
x[CPA_code == "CPA_C27", total_exp := C27_C28*(1348)/(1348+753)]
x[CPA_code == "CPA_C28", total_exp := C27_C28*(753)/(1348+753)]
setkey(x, CPA_code)
x <- x[!"CPA_C27 & C28"]
x <- x[!"CPA_H53&I55"]
x <- x[,c("CPA_code","Product.y","total_exp")]
setnames(x,c("Product.y","total_exp"),c("Product","hhold_exp"))
View(x)
## add in the initial change to expenditure on tobacco and alcohol
x[Product == "Alcoholic beverages  & Tobacco products",
hhold_exp := hhold_exp + sum(expenditure)]
merge_data <- tobalciomodel::sic_cpa_fai_mapping
View(merge_data)
merge_data <- unique(tobalciomodel::sic_cpa_fai_mapping[,c("CPA_code","Prodcut","IOC","Sector")])
merge_data <- unique(tobalciomodel::sic_cpa_fai_mapping[,c("CPA_code","Product","IOC","Sector")])
View(merge_data)
merge_data <- merge_data[order(CPA_code)]
View(x)
names(x)
names(merge_data)
map_to_FAI <- merge(x, merge_data, by = c("CPA_code","Product"))
map_to_FAI <- merge(x, merge_data, by = c("CPA_code","Product"), all = T)
View(map_to_FAI)
View(map_to_FAI)
library(data.table)
######## mapping between SIC and CPA (ONS SUT tables) and IOC (FAI table)
## read in the SIC - FAI mapping sheet
map_fai <- readxl::read_excel("data-raw/FAI SIC mapping.xlsx",
range = "A1:D613",
col_names = TRUE)
setDT(map_fai)
map_fai[, SIC_code := as.numeric(SIC_code)]
## read in the SIC - FAI mapping sheet
map_cpa <- readxl::read_excel("data-raw/CPA SIC mapping.xlsx",
range = "A1:D613",
col_names = TRUE)
setDT(map_cpa)
map_cpa[, SIC_code := as.numeric(SIC_code)]
## merge
sic_cpa_fai_mapping <- merge(map_cpa, map_fai, by = c("Industry","SIC_code"), sort = F)
usethis::use_data(sic_cpa_fai_mapping,overwrite = TRUE)
library(tobalciomodel)
expenditure = c(-20,10,30)
saving_rate = 0.1
vector = "hhfce_noalctob"
vectors_data = tobalciomodel::vectors_hhold
mapping = tobalciomodel::coicop_cpa_mapping
FAI = FALSE
# calculate the amount of expenditure that will be reallocated
exp <- -1*(1 - saving_rate)*sum(expenditure)
# select the chosen reallocation vector
if (vector == "hhfce_all") {
v <- as.vector(as.matrix( vectors_data[,2] ))
} else if (vector == "hhfce_noalc") {
v <- as.vector(as.matrix( vectors_data[,3] ))
} else if (vector == "hhfce_notob") {
v <- as.vector(as.matrix( vectors_data[,4] ))
} else if (vector == "hhfce_noalctob") {
v <- as.vector(as.matrix( vectors_data[,5] ))
} else if (vector == "all_hotels") {
v <- as.vector(as.matrix( vectors_data[,6] ))
} else if (vector == "all_rec_durables") {
v <- as.vector(as.matrix( vectors_data[,7] ))
} else if (vector == "all_rec_services") {
v <- as.vector(as.matrix( vectors_data[,8] ))
}
# redistribute the expenditure along the vector
new_exp <- exp*v
new_exp <- cbind(vectors_data[,1],new_exp)
# map the new expenditure onto the CPA categories
merge <- merge.data.table(mapping,
new_exp,
by = "coicop")
merge[, mapped_exp := new_exp*mapping]
# sum up within CPA categories
merge[, total_exp := sum(mapped_exp), by = "CPA_code"]
# collapse
final <- unique(merge[,c("CPA_code","Product","total_exp")])
### Two discrepancies are caused by merged CPA categories in the
### HHFCE table:
#
# (1) H53 (postal and courier) and I55 (accommodation services)
# (2) C27 (electrical equipment) and C28 (machinery and equipment n.e.c)
#
#     Go to the final consumption expenditure by households column
#     in the IOT sheet in "ioat 2017" and construct ratios from the
#     figures given there to break up the categories. (Hard coded here)
x <- merge(final, tobalciomodel::CPA,
by = "CPA_code", sort = FALSE, all = TRUE)
H53_I55 <- as.numeric(x[CPA_code == "CPA_H53&I55","total_exp"])
x[CPA_code == "CPA_H53", total_exp := H53_I55*841/(841+4722)]
x[CPA_code == "CPA_I55", total_exp := H53_I55*4722/(841+4722)]
C27_C28 <- as.numeric(x[CPA_code == "CPA_C27 & C28","total_exp"])
x[CPA_code == "CPA_C27", total_exp := C27_C28*(1348)/(1348+753)]
x[CPA_code == "CPA_C28", total_exp := C27_C28*(753)/(1348+753)]
setkey(x, CPA_code)
x <- x[!"CPA_C27 & C28"]
x <- x[!"CPA_H53&I55"]
x <- x[,c("CPA_code","Product.y","total_exp")]
setnames(x,c("Product.y","total_exp"),c("Product","hhold_exp"))
View(x)
merge_data <- unique(tobalciomodel::sic_cpa_fai_mapping[,c("CPA_code","Product","IOC","Sector")])
map_to_FAI <- merge(x, merge_data, by = c("CPA_code","Product"), all = T)
View(map_to_FAI)
View(x)
View(merge_data)
library(data.table)
######## mapping between SIC and CPA (ONS SUT tables) and IOC (FAI table)
## read in the SIC - FAI mapping sheet
map_fai <- readxl::read_excel("data-raw/FAI SIC mapping.xlsx",
range = "A1:D613",
col_names = TRUE)
setDT(map_fai)
map_fai[, SIC_code := as.numeric(SIC_code)]
## read in the SIC - FAI mapping sheet
map_cpa <- readxl::read_excel("data-raw/CPA SIC mapping.xlsx",
range = "A1:D613",
col_names = TRUE)
setDT(map_cpa)
map_cpa[, SIC_code := as.numeric(SIC_code)]
## merge
sic_cpa_fai_mapping <- merge(map_cpa, map_fai, by = c("Industry","SIC_code"), sort = F)
usethis::use_data(sic_cpa_fai_mapping,overwrite = TRUE)
library(tobalciomodel)
merge_data <- unique(tobalciomodel::sic_cpa_fai_mapping[,c("CPA_code","Product","IOC","Sector")])
map_to_FAI <- merge(x, merge_data, by = c("CPA_code","Product"), all = T)
map_to_FAI <- merge(x, merge_data, by = c("CPA_code","Product"))
View(map_to_FAI)
FAI <- map_to_FAI[, .(hhold_exp = sum(hhold_exp)), by = c("IOC","Sector")]
View(FAI)
data <- tobalciomodel::iotable_fai
names(data)
FAI <- merge(FAI, tobalciomodel::iotable_fai[,"name"], by.x = "Sector", by.y = "name")
sectors <- tobalciomodel::iotable_fai[,"name"]
sectors <- as.data.frame(tobalciomodel::iotable_fai[,"name"])
FAI <- merge(FAI, sectors, by.x = "Sector", by.y = "name")
View(sectors)
sectors <- as.data.frame(tobalciomodel::iotable_fai[,"name"])
setDT(sectors)
setnames(sectors, names(sectors), "Sector")
FAI <- merge(FAI, sectors, by = "Sector", all = TRUE)
View(FAI)
FAI <- map_to_FAI[, .(hhold_exp = sum(hhold_exp)), by = c("IOC","Sector")]
## merge to the names of the FAI IO table to get the 3 disaggregated alcohol sectors
sectors <- as.data.frame(tobalciomodel::iotable_fai[,"name"])
setDT(sectors)
setnames(sectors, names(sectors), "Sector")
FAI <- merge(sectors, FAI, by = "Sector", all = TRUE, sort = FALSE)
View(FAI)
FAI[Sector == %in% "Manufacture Of Tobacco Products", hhold_exp := expenditure[3]]
FAI[Sector %in% "Manufacture Of Tobacco Products", hhold_exp := expenditure[3]]
View(FAI)
expenditure[3]
View(FAI)
FAI[Sector %in% "Manufacture Of Tobacco Products", hhold_exp := expenditure[3]]
View(FAI)
FAI[18, hhold_exp := expenditure[3]]
View(FAI)
FAI[61, hhold_exp := expenditure[1]]
View(FAI)
roxygen2::roxygenise()
library(tobalciomodel)
expenditure = 10
rm(list = ls())
expenditure = 10
vector = "central"
vectors_data = tobalciomodel::vectors_govt
View(vectors_data)
# calculate the amount of expenditure that will be reallocated
exp <- expenditure
# select the chosen reallocation vector
if (vector == "central") {
v <- as.vector(as.matrix( vectors_data[,3] ))
} else if (vector == "local") {
v <- as.vector(as.matrix( vectors_data[,4] ))
} else if (vector == "total") {
v <- as.vector(as.matrix( vectors_data[,5] ))
} else if (vector == "all_pubadmin") {
v <- as.vector(as.matrix( vectors_data[,6] ))
} else if (vector == "all_education") {
v <- as.vector(as.matrix( vectors_data[,7] ))
} else if (vector == "all_health") {
v <- as.vector(as.matrix( vectors_data[,8] ))
} else if (vector == "all_socialwork") {
v <- as.vector(as.matrix( vectors_data[,9] ))
} else if (vector == "all_cultural") {
v <- as.vector(as.matrix( vectors_data[,10] ))
}
# redistribute the expenditure along the vector
govt_exp <- exp*v
govt_exp <- cbind(vectors_data[,c(1,2)],govt_exp)
View(govt_exp)
sectors <- as.data.frame(tobalciomodel::iotable_fai[,"name"])
setDT(sectors)
setnames(sectors, names(sectors), "Sector")
## extract the CPA/IOC lookup table and merge, collapsing by FAI categories
merge_data <- unique(tobalciomodel::sic_cpa_fai_mapping[,c("CPA_code","Product","IOC","Sector")])
map_to_FAI <- merge(x, merge_data, by = c("CPA_code","Product"))
FAI <- map_to_FAI[, .(hhold_exp = sum(hhold_exp)), by = c("IOC","Sector")]
## merge to the names of the FAI IO table to get the 3 disaggregated alcohol sectors
sectors <- as.data.frame(tobalciomodel::iotable_fai[,"name"])
setDT(sectors)
setnames(sectors, names(sectors), "Sector")
merge_data <- unique(tobalciomodel::sic_cpa_fai_mapping[,c("CPA_code","Product","IOC","Sector")])
map_to_FAI <- merge(govt_exp, merge_data, by = c("CPA_code","Product"))
FAI <- map_to_FAI[, .(hhold_exp = sum(hhold_exp)), by = c("IOC","Sector")]
View(map_to_FAI)
FAI <- map_to_FAI[, .(govt_exp = sum(govt_exp)), by = c("IOC","Sector")]
sectors <- as.data.frame(tobalciomodel::iotable_fai[,"name"])
setDT(sectors)
setnames(sectors, names(sectors), "Sector")
FAI <- merge(sectors, FAI, by = "Sector", all = TRUE, sort = FALSE)
View(FAI)
FAI[61, hhold_exp := 0]
FAI[c(69,71), hhold_exp := 0]
FAI[18, hhold_exp := 0]
govt_exp <- copy(FAI)
summary(govt_exp)
rm(list = ls())
FAI = TRUE
expenditure = 10
vector = "central"
vectors_data = tobalciomodel::vectors_govt
FAI = FALSE
FAI = TRUE
# calculate the amount of expenditure that will be reallocated
exp <- expenditure
# select the chosen reallocation vector
if (vector == "central") {
v <- as.vector(as.matrix( vectors_data[,3] ))
} else if (vector == "local") {
v <- as.vector(as.matrix( vectors_data[,4] ))
} else if (vector == "total") {
v <- as.vector(as.matrix( vectors_data[,5] ))
} else if (vector == "all_pubadmin") {
v <- as.vector(as.matrix( vectors_data[,6] ))
} else if (vector == "all_education") {
v <- as.vector(as.matrix( vectors_data[,7] ))
} else if (vector == "all_health") {
v <- as.vector(as.matrix( vectors_data[,8] ))
} else if (vector == "all_socialwork") {
v <- as.vector(as.matrix( vectors_data[,9] ))
} else if (vector == "all_cultural") {
v <- as.vector(as.matrix( vectors_data[,10] ))
}
# redistribute the expenditure along the vector
govt_exp <- exp*v
govt_exp <- cbind(vectors_data[,c(1,2)],govt_exp)
if (FAI == TRUE) {
## extract the CPA/IOC lookup table and merge, collapsing by FAI categories
merge_data <- unique(tobalciomodel::sic_cpa_fai_mapping[,c("CPA_code","Product","IOC","Sector")])
map_to_FAI <- merge(govt_exp, merge_data, by = c("CPA_code","Product"))
FAI <- map_to_FAI[, .(govt_exp = sum(govt_exp)), by = c("IOC","Sector")]
## merge to the names of the FAI IO table to get the 3 disaggregated alcohol sectors
sectors <- as.data.frame(tobalciomodel::iotable_fai[,"name"])
setDT(sectors)
setnames(sectors, names(sectors), "Sector")
FAI <- merge(sectors, FAI, by = "Sector", all = TRUE, sort = FALSE)
## fill in the three alcohol categories and manufacture of tobacco with the initial changes
## to expenditure (these are always 0 for govt spending)
FAI[61, hhold_exp := 0]
FAI[c(69,71), hhold_exp := 0]
FAI[18, hhold_exp := 0]
govt_exp <- copy(FAI)
}
summary(govt_exp)
# calculate the amount of expenditure that will be reallocated
exp <- expenditure
# select the chosen reallocation vector
if (vector == "central") {
v <- as.vector(as.matrix( vectors_data[,3] ))
} else if (vector == "local") {
v <- as.vector(as.matrix( vectors_data[,4] ))
} else if (vector == "total") {
v <- as.vector(as.matrix( vectors_data[,5] ))
} else if (vector == "all_pubadmin") {
v <- as.vector(as.matrix( vectors_data[,6] ))
} else if (vector == "all_education") {
v <- as.vector(as.matrix( vectors_data[,7] ))
} else if (vector == "all_health") {
v <- as.vector(as.matrix( vectors_data[,8] ))
} else if (vector == "all_socialwork") {
v <- as.vector(as.matrix( vectors_data[,9] ))
} else if (vector == "all_cultural") {
v <- as.vector(as.matrix( vectors_data[,10] ))
}
# redistribute the expenditure along the vector
govt_exp <- exp*v
govt_exp <- cbind(vectors_data[,c(1,2)],govt_exp)
if (FAI == TRUE) {
## extract the CPA/IOC lookup table and merge, collapsing by FAI categories
merge_data <- unique(tobalciomodel::sic_cpa_fai_mapping[,c("CPA_code","Product","IOC","Sector")])
map_to_FAI <- merge(govt_exp, merge_data, by = c("CPA_code","Product"))
FAI <- map_to_FAI[, .(govt_exp = sum(govt_exp)), by = c("IOC","Sector")]
## merge to the names of the FAI IO table to get the 3 disaggregated alcohol sectors
sectors <- as.data.frame(tobalciomodel::iotable_fai[,"name"])
setDT(sectors)
setnames(sectors, names(sectors), "Sector")
FAI <- merge(sectors, FAI, by = "Sector", all = TRUE, sort = FALSE)
## fill in the three alcohol categories and manufacture of tobacco with the initial changes
## to expenditure (these are always 0 for govt spending)
FAI[61, govt_exp := 0]
FAI[c(69,71), govt_exp := 0]
FAI[18, govt_exp := 0]
govt_exp <- copy(FAI)
}
FAI = TRUE
# calculate the amount of expenditure that will be reallocated
exp <- expenditure
# select the chosen reallocation vector
if (vector == "central") {
v <- as.vector(as.matrix( vectors_data[,3] ))
} else if (vector == "local") {
v <- as.vector(as.matrix( vectors_data[,4] ))
} else if (vector == "total") {
v <- as.vector(as.matrix( vectors_data[,5] ))
} else if (vector == "all_pubadmin") {
v <- as.vector(as.matrix( vectors_data[,6] ))
} else if (vector == "all_education") {
v <- as.vector(as.matrix( vectors_data[,7] ))
} else if (vector == "all_health") {
v <- as.vector(as.matrix( vectors_data[,8] ))
} else if (vector == "all_socialwork") {
v <- as.vector(as.matrix( vectors_data[,9] ))
} else if (vector == "all_cultural") {
v <- as.vector(as.matrix( vectors_data[,10] ))
}
# redistribute the expenditure along the vector
govt_exp <- exp*v
govt_exp <- cbind(vectors_data[,c(1,2)],govt_exp)
if (FAI == TRUE) {
## extract the CPA/IOC lookup table and merge, collapsing by FAI categories
merge_data <- unique(tobalciomodel::sic_cpa_fai_mapping[,c("CPA_code","Product","IOC","Sector")])
map_to_FAI <- merge(govt_exp, merge_data, by = c("CPA_code","Product"))
FAI_data <- map_to_FAI[, .(govt_exp = sum(govt_exp)), by = c("IOC","Sector")]
## merge to the names of the FAI IO table to get the 3 disaggregated alcohol sectors
sectors <- as.data.frame(tobalciomodel::iotable_fai[,"name"])
setDT(sectors)
setnames(sectors, names(sectors), "Sector")
FAI_data <- merge(sectors, FAI_data, by = "Sector", all = TRUE, sort = FALSE)
## fill in the three alcohol categories and manufacture of tobacco with the initial changes
## to expenditure (these are always 0 for govt spending)
FAI_data[61, govt_exp := 0]
FAI_data[c(69,71), govt_exp := 0]
FAI_data[18, govt_exp := 0]
govt_exp <- copy(FAI)
}
summary(govt_exp)
# calculate the amount of expenditure that will be reallocated
exp <- expenditure
# select the chosen reallocation vector
if (vector == "central") {
v <- as.vector(as.matrix( vectors_data[,3] ))
} else if (vector == "local") {
v <- as.vector(as.matrix( vectors_data[,4] ))
} else if (vector == "total") {
v <- as.vector(as.matrix( vectors_data[,5] ))
} else if (vector == "all_pubadmin") {
v <- as.vector(as.matrix( vectors_data[,6] ))
} else if (vector == "all_education") {
v <- as.vector(as.matrix( vectors_data[,7] ))
} else if (vector == "all_health") {
v <- as.vector(as.matrix( vectors_data[,8] ))
} else if (vector == "all_socialwork") {
v <- as.vector(as.matrix( vectors_data[,9] ))
} else if (vector == "all_cultural") {
v <- as.vector(as.matrix( vectors_data[,10] ))
}
# redistribute the expenditure along the vector
govt_exp <- exp*v
govt_exp <- cbind(vectors_data[,c(1,2)],govt_exp)
if (FAI == TRUE) {
## extract the CPA/IOC lookup table and merge, collapsing by FAI categories
merge_data <- unique(tobalciomodel::sic_cpa_fai_mapping[,c("CPA_code","Product","IOC","Sector")])
map_to_FAI <- merge(govt_exp, merge_data, by = c("CPA_code","Product"))
FAI_data <- map_to_FAI[, .(govt_exp = sum(govt_exp)), by = c("IOC","Sector")]
## merge to the names of the FAI IO table to get the 3 disaggregated alcohol sectors
sectors <- as.data.frame(tobalciomodel::iotable_fai[,"name"])
setDT(sectors)
setnames(sectors, names(sectors), "Sector")
FAI_data <- merge(sectors, FAI_data, by = "Sector", all = TRUE, sort = FALSE)
## fill in the three alcohol categories and manufacture of tobacco with the initial changes
## to expenditure (these are always 0 for govt spending)
FAI_data[61, govt_exp := 0]
FAI_data[c(69,71), govt_exp := 0]
FAI_data[18, govt_exp := 0]
govt_exp <- copy(FAI_data)
}
summary(govt_exp)
roxygen2::roxygenise()
library(tobalciomodel)
usethis::use_version()
roxygen2::roxygenise()
library(tobalciomodel)
policy_effect_year = 2022
n_years = 5
max_year <- policy_effect_year + n_years - 1
max_year
policy_effect_year:max_year
roxygen2::roxygenise()
library(tobalciomodel)
roxygen2::roxygenise()
library(tobalciomodel)
library(tobalciomodel)
